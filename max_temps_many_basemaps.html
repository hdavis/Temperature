<!DOCTYPE html>
<html>
<head>
	<title>A Look at the Last 30 days of Maximum Temperatures</title>
	<meta charset="utf-8" />

	<meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.css" />
	<!--[if lte IE 8]><link rel="stylesheet" href="../dist/leaflet.ie.css" /><![endif]-->
    <style type="text/css">
    html, body, #map{
     height: 100%;
     width: 100%;
     margin: 0;
     padding: 0;
    }
    </style>
</head>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>

    <div id="map"></div>

    <script>
        var map = L.map('map');
        var zoommax = 18;

        // BASEMAPS
        // Additional basemaps @ https://leaflet-extras.github.io/leaflet-providers/preview/

        // Standard OSM basemap
        var OpenStreetMap_Mapnik = L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
        });
        map.addLayer(OpenStreetMap_Mapnik);

     //   var openstreetUrl = 'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
      //  var openstreet = new L.tileLayer(openstreetUrl, {maxZoom: zoommax});
      //  map.addLayer(openstreet);

        // OpenStreetMap Black and White basemap
        var OpenStreetMap_BlackAndWhite = L.tileLayer('http://{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png', {
        maxZoom: 18,
        attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
        });
        map.addLayer(OpenStreetMap_BlackAndWhite);

        // MapQuest Aerial Basemap
    //    var mapquestAerialUrl = 'http://otile{s}.mqcdn.com/tiles/1.0.0/sat/{z}/{x}/{y}.jpg';
    //    var mapaerial = new L.tileLayer(mapquestAerialUrl, {maxZoom: zoommax, subdomains:'1234'});
    //    map.addLayer(mapaerial);

        // Stamen Watercolor Basemap
        var Stamen_Watercolor = L.tileLayer('http://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.{ext}', {
        attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
        subdomains: 'abcd',
        minZoom: 1,
        maxZoom: 16,
        ext: 'png'
        });
        map.addLayer(Stamen_Watercolor);


        // Open Map Surfer Roads Basemap
        var OpenMapSurfer_Roads = L.tileLayer('http://korona.geog.uni-heidelberg.de/tiles/roads/x={x}&y={y}&z={z}', {
        maxZoom: 20,
        attribution: 'Imagery from <a href="http://giscience.uni-hd.de/">GIScience Research Group @ University of Heidelberg</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
        });
        map.addLayer(OpenMapSurfer_Roads);


        // ESRI - National Geographic World Basemap
        var Esri_NatGeoWorldMap = L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}', {
        attribution: 'Tiles &copy; Esri &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC',
        maxZoom: 16
        });
        map.addLayer(Esri_NatGeoWorldMap);

        // ESRI World Topo Basemap
        var Esri_WorldTopoMap = L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}', {
        attribution: 'Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community'
        });
        map.addLayer(Esri_WorldTopoMap);

        // ESRI World Street Basemap
        var Esri_WorldStreetMap = L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}', {
        attribution: 'Tiles &copy; Esri &mdash; Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012'
        });
        map.addLayer(Esri_WorldStreetMap);


        // Thunderforest Pioneer Basemap
        var Thunderforest_Pioneer = L.tileLayer('http://{s}.tile.thunderforest.com/pioneer/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="http://www.thunderforest.com/">Thunderforest</a>, &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
        });
        map.addLayer(Thunderforest_Pioneer);




        // OVERLAYS

        // (1) Add data from our local machine
        var sf_schools = new L.geoJson();
        sf_schools.addTo(map);

        $.ajax({
        dataType: "json",
        url: "San Francisco Public Schools - Points.geojson",
        success: function(data) {
            $(data.features).each(function(key, data) {
            sf_schools.addData(data);
            });
        }
        }).error(function() {});
 

        // Add maximum temperature data
        var max_temps = new L.geoJson();
        max_temps.addTo(map);

        $.ajax({
        dataType: "json",
        url: "summary.geojson",
        success: function(data) {
            $(data.features).each(function(key, data) {
            max_temps.addData(data);
            });
        }
        }).error(function() {});


        // (2) Add a WMS for weather data
        var nexrad = L.tileLayer.wms("http://mesonet.agron.iastate.edu/cgi-bin/wms/nexrad/n0r.cgi", {
        layers: 'nexrad-n0r-900913',
        format: 'image/png',
        transparent: true,
        attribution: "Weather data Â© 2012 IEM Nexrad"
        });
        map.addLayer(nexrad);


        // Define and display the control for Basemaps and Overlays
        var baseLayers = {
            "Open Street Map": OpenStreetMap_Mapnik,
            "Open Street Map - B&W": OpenStreetMap_BlackAndWhite,
           // "Map Quest Aerial": mapaerial,
            "Open Map Surfer Roads": OpenMapSurfer_Roads,
            "ESRI - National Geographic": Esri_NatGeoWorldMap,
            "ESRI Topo": Esri_WorldTopoMap,
            "ESRI Street": Esri_WorldStreetMap,
            "Pioneer": Thunderforest_Pioneer,
            "Water Color": Stamen_Watercolor
        };
        var overlays = {
            "Maximum Temperatures": max_temps,
            "SF Schools": sf_schools,
            "Weather": nexrad,
        };
        L.control.layers(baseLayers, overlays).addTo(map);

        map.setView([38, -100], 4);
    </script>
</body>
</html>